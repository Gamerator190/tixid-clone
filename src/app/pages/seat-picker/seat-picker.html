<div class="seat-page">

  <div class="layout-frame">
    <div class="screen-box">
      <div class="screen">STAGE</div>
    </div>

    <div class="auditorium">
      <div class="side-label side-label-upper">Lower Foyer</div>

      <div class="main-floor">
        <div class="seat-row" *ngFor="let row of lowerFoyerSeats; let i = index">
          <div class="row-label">{{ lowerRows[i] }}</div>

          <div class="seat-block left">
            <div
              class="seat"
              *ngFor="let seat of row | slice:0:10"
              [class.booked]="seat.booked"
              [class.selected]="selectedSeats.includes(seat.id)"
              (click)="toggleSeat(seat)"
            >
              {{ seat.id }}
            </div>
          </div>

          <div class="seat-block center">
            <div
              class="seat"
              *ngFor="let seat of row | slice:10:20"
              [class.booked]="seat.booked"
              [class.selected]="selectedSeats.includes(seat.id)"
              (click)="toggleSeat(seat)"
            >
              {{ seat.id }}
            </div>
          </div>

          <div class="seat-block right">
            <div
              class="seat"
              *ngFor="let seat of row | slice:20:30"
              [class.booked]="seat.booked"
              [class.selected]="selectedSeats.includes(seat.id)"
              (click)="toggleSeat(seat)"
            >
              {{ seat.id }}
            </div>
          </div>

          <div class="row-label">{{ lowerRows[i] }}</div>
        </div>
      </div>

      <div class="balcony">
        <div class="balcony-row" *ngFor="let row of balconySeats; let i = index">
          <div class="row-label">{{ balconyRows[i] }}</div>

          <div class="seat-block left">
            <div
              class="seat"
              *ngFor="let seat of row | slice:0:10"
              [class.booked]="seat.booked"
              [class.selected]="selectedSeats.includes(seat.id)"
              (click)="toggleSeat(seat)"
            >
              {{ seat.id }}
            </div>
          </div>

          <div class="balcony-gap"></div>

          <div class="seat-block middle">
            <div
              class="seat"
              *ngFor="let seat of row | slice:10:20"
              [class.booked]="seat.booked"
              [class.selected]="selectedSeats.includes(seat.id)"
              (click)="toggleSeat(seat)"
            >
              {{ seat.id }}
            </div>
          </div>

          <div class="balcony-gap"></div>

          <div class="seat-block right">
            <div
              class="seat"
              *ngFor="let seat of row | slice:20:30"
              [class.booked]="seat.booked"
              [class.selected]="selectedSeats.includes(seat.id)"
              (click)="toggleSeat(seat)"
            >
              {{ seat.id }}
            </div>
          </div>

          <div class="row-label">{{ balconyRows[i] }}</div>
        </div>
      </div>

      <div class="control-room-wrapper">
        <div class="control-room">CONTROL ROOM</div>
      </div>

      <div class="side-label side-label-lower">BALCONY</div>
    </div>
  </div>

  <div class="summary-box" *ngIf="selectedSeatDetails.length">
    <div class="summary-header">
      <span>Chosen seats</span>

      <span class="summary-count">{{ selectedSeatDetails.length }} ticket(s)</span>
    </div>

    <div class="summary-list">
      <div class="summary-row" *ngFor="let s of selectedSeatDetails">
        <div class="s-seat">{{ s.id }}</div>

        <div class="s-type">{{ s.type }}</div>

        <div class="s-price">Rp {{ formatRupiah(s.price) }}</div>
      </div>
    </div>

    <div class="summary-total">
      <span>Total</span>

      <span>Rp {{ formatRupiah(totalPrice) }}</span>
    </div>
  </div>

  <!-- <button class="dev-btn" (click)="selectAllSeats()">DEV: Select All</button> -->

  @if (showContinueButton) {

  <button class="next-btn" (click)="continue()">
    Continue ({{ selectedSeatDetails.length }} tickets Â· Rp {{ formatRupiah(totalPrice) }})
  </button>

  }
</div>
