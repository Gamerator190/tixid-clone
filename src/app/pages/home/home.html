<div class="home-page">
  <header class="top-bar">
    <div class="brand">
      <div class="logo">PLAN<span>FUN</span></div>
    </div>

    <div class="top-actions">
      <button class="notif-btn" type="button" (click)="openNotifications()" title="Notifikasi">
        üîî @if (unreadCount > 0) {
        <span class="notification-badge">{{ unreadCount }}</span>
        }
      </button>

      <div class="user-pill" (click)="toggleUserMenu()">
        <div class="avatar-wrap">
          <div class="avatar-glow"></div>
          <div class="avatar">{{ userName[0] || 'U' }}</div>
        </div>

        <div class="user-meta">
          <div class="hello">Hi üëã</div>
          <div class="name">{{ userName }}</div>
        </div>

        <div class="icon">
          <span>‚ñæ</span>
        </div>
      </div>
    </div>

    <div class="user-menu" *ngIf="showMenu">
      <div class="menu-item" *ngIf="userRole === 'auditorium_admin'" (click)="goAdmin()">
        Admin Dashboard
      </div>
      <div class="menu-item" *ngIf="userRole === 'organizer'" (click)="goOrganizer()">
        Dashboard
      </div>
      <div class="menu-item" (click)="goToForgotPassword()">
        Forgot Password
      </div>
      <div class="menu-item" (click)="logout()">Logout</div>
    </div>
  </header>

  <main class="content">
    <section class="hero-card" *ngIf="events.length">
      <div class="hero-text">
        <p class="hero-label">Now Showing</p>
        <h1 class="hero-title">{{ events[0].title }}</h1>
        <p class="hero-subtitle">{{ events[0].date }}</p>
        <p class="hero-subtitle">{{ events[0].time }}</p>
        <p class="hero-subtitle">{{ events[0].location }}</p>
        <p class="hero-subtitle">
          @if (events[0].availableSeats > 0) { {{ events[0].availableSeats }} seats left } @else {
          Sold Out }
        </p>
        <button class="hero-btn" type="button" (click)="goEvent(events[0].id)">See Details</button>
      </div>
      <div class="hero-poster">
        <img [src]="events[0].poster" [alt]="events[0].title" />
        <div class="hero-badge">Top Pick</div>
      </div>
    </section>

    <section class="tools">
      <div class="search-box">
        <span class="search-icon">üîç</span>
        <input type="text" placeholder="Search for events..." />
      </div>

      <div class="chips">
        <button class="chip chip-active" type="button">Now Showing</button>
        <button class="chip" type="button">Coming Soon</button>
        <button class="chip" type="button">SPECIAL</button>
      </div>
    </section>

    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Recommended for you</h2>
        <button class="see-all" type="button">See all</button>
      </div>

      <div class="event-scroll">
        <div class="event-tile" *ngFor="let event of events" (click)="goEvent(event.id)">
          <div class="tile-poster">
            <img [src]="event.poster" [alt]="event.title" />
            <div class="tile-badge new" *ngIf="event.isNew">NEW</div>
            <div class="tile-badge special" *ngIf="event.isSpecial">SPECIAL</div>
          </div>
          <div class="tile-title">{{ event.title }}</div>
          <div class="tile-location">{{ event.location }}</div>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="section-header">
        <h2 class="section-title">All Events</h2>
      </div>

      <div class="event-grid">
        <div class="event-card" *ngFor="let event of events" (click)="goEvent(event.id)">
          <div class="poster-wrap">
            <img [src]="event.poster" [alt]="event.title" />
            <div class="corner-tag special" *ngIf="event.isSpecial">SPECIAL</div>
            <div class="corner-tag new" *ngIf="event.isNew">NEW</div>
          </div>
          <div class="event-info">
            <div class="title">{{ event.title }}</div>
            <div class="location">{{ event.location }}</div>
            <div class="meta vertical">
              <div class="date-time">{{ event.date }}</div>
              <div class="date-time">{{ event.time }}</div>
              @if (event.availableSeats > 0) {
              <div class="availability">{{ event.availableSeats }} seats left</div>
              } @else {
              <div class="availability sold-out">Sold Out</div>

              }
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>
