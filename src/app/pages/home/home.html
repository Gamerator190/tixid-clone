<div class="home-page">
  <!-- TOP BAR -->
  <header class="top-bar">
    <div class="brand">
      <div class="logo">PLAN<span>FUN</span></div>

      <div class="location">
        <span class="city">Bali</span>
        <span class="change">Change</span>
      </div>
    </div>

    <div class="top-actions">
      <button class="notif-btn" type="button" (click)="openNotifications()" title="Notifikasi">
        ğŸ””
      </button>

      <div class="user-pill" (click)="toggleUserMenu()">
        <div class="avatar-wrap">
          <div class="avatar-glow"></div>
          <div class="avatar">{{ userName?.[0] || 'U' }}</div>
        </div>

        <div class="user-meta">
          <div class="hello">Hi ğŸ‘‹</div>
          <div class="name">{{ userName }}</div>
        </div>

        <div class="icon">
          <span>â–¾</span>
        </div>
      </div>
    </div>

    <!-- DROPDOWN USER MENU -->
    <div class="user-menu" *ngIf="showMenu">
      <div class="menu-item" *ngIf="userRole === 'auditorium_admin'" (click)="goAdmin()">
        Admin Dashboard
      </div>
      <div class="menu-item" *ngIf="userRole === 'organizer'" (click)="goOrganizer()">
        Dashboard
      </div>
      <div class="menu-item" (click)="logout()">Logout</div>
    </div>
  </header>

  <main class="content">
    <!-- HERO SECTION -->
    <section class="hero-card" *ngIf="events.length">
      <div class="hero-text">
        <p class="hero-label">Now Showing</p>
        <h1 class="hero-title">{{ events[0].title }}</h1>
        <p class="hero-subtitle">
          {{ events[0].genre }} Â· Rating {{ events[0].rating | number : '1.1-1' }} Â· {{
          events[0].duration }}
        </p>
        <button class="hero-btn" type="button" (click)="goEvent(events[0].id)">
          See today's schedule
        </button>
      </div>
      <div class="hero-poster">
        <img [src]="events[0].poster" [alt]="events[0].title" />
        <div class="hero-badge">
          Top Pick {{ events[0].releaseDate ? 'Â· ' + events[0].releaseDate : '' }}
        </div>
      </div>
    </section>

    <!-- SEARCH & FILTER -->
    <section class="tools">
      <div class="search-box">
        <span class="search-icon">ğŸ”</span>
        <input type="text" placeholder="Cari judul film..." />
      </div>

      <div class="chips">
        <button class="chip chip-active" type="button">Now Showing</button>
        <button class="chip" type="button">Coming Soon</button>
        <button class="chip" type="button">IMAX</button>
        <button class="chip" type="button">Family</button>
      </div>
    </section>

    <!-- HORIZONTAL SCROLL LIST -->
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Recommended for you</h2>
        <button class="see-all" type="button">See all</button>
      </div>

      <div class="event-scroll">
        <div class="event-tile" *ngFor="let event of events" (click)="goEvent(event.id)">
          <div class="tile-poster">
            <img [src]="event.poster" [alt]="event.title" />
            <div class="tile-rating">â˜… {{ event.rating | number : '1.1-1' }}</div>
            <div class="tile-badge new" *ngIf="event.isNew">NEW</div>
            <div class="tile-badge imax" *ngIf="event.isImax">IMAX</div>
          </div>
          <div class="tile-title">{{ event.title }}</div>
          <div class="tile-genre">
            {{ event.genre }}
            <span *ngIf="event.releaseDate"> Â· {{ event.releaseDate }}</span>
          </div>
        </div>
      </div>
    </section>

    <!-- GRID LIST -->
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">All Events</h2>
      </div>

      <div class="event-grid">
        <div class="event-card" *ngFor="let event of events" (click)="goEvent(event.id)">
          <div class="poster-wrap">
            <img [src]="event.poster" [alt]="event.title" />
            <div class="age-badge">{{ event.ageRating }}</div>
            <div class="rating-badge">â˜… {{ event.rating | number : '1.1-1' }}</div>
            <div class="corner-tag imax" *ngIf="event.isImax">IMAX</div>
            <div class="corner-tag new" *ngIf="event.isNew">NEW</div>
          </div>
          <div class="event-info">
            <div class="title">{{ event.title }}</div>
            <div class="genre">
              {{ event.genre }}
              <span *ngIf="event.releaseDate"> Â· {{ event.releaseDate }}</span>
            </div>
            <div class="meta">
              <span>{{ event.duration }}</span>
              <span class="dot">â€¢</span>
              <span>{{ event.ageRating }}</span>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- BOTTOM NAVBAR -->
  <nav class="bottom-nav">
    <button class="nav-item active" type="button">
      <div class="nav-icon">ğŸ </div>
      <div class="nav-label">Home</div>
    </button>
    <button class="nav-item" type="button" (click)="router.navigate(['/my-tickets'])">
      <div class="nav-icon">ğŸŸï¸</div>
      <div class="nav-label">Tickets</div>
    </button>
    <button class="nav-item" type="button" (click)="toggleUserMenu()">
      <div class="nav-icon">ğŸ‘¤</div>
      <div class="nav-label">Account</div>
    </button>
  </nav>
</div>
