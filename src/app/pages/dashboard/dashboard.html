<div class="dashboard">
  <!-- TOP BAR HEADER -->
  <header class="top-bar">
    <div class="brand">
      <div class="logo">PLAN<span>FUN</span></div>
    </div>

    <div class="top-actions">
      <button class="notif-btn" type="button" (click)="openNotifications()" title="Notifikasi">
        üîî
      </button>

      <div class="user-pill" (click)="toggleUserMenu()">
        <div class="avatar-wrap">
          <div class="avatar-glow"></div>
          <div class="avatar">{{ userName[0] || 'A' }}</div>
        </div>

        <div class="user-meta">
          <div class="hello">Hi üëã</div>
          <div class="name">{{ userName }}</div>
        </div>

        <div class="icon">
          <span>‚ñæ</span>
        </div>
      </div>
    </div>

    <!-- DROPDOWN USER MENU -->
    <div class="user-menu" *ngIf="showMenu">
      <div class="menu-item" (click)="goHome()">Homepage</div>
      <div class="menu-item" (click)="logout()">Logout</div>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="dashboard-content">
    <!-- HEADER -->
    <div class="dashboard-header">
      <h1 class="content-title">Event Organizer Dashboard</h1>
      <p class="content-subtitle">Manage events and system analytics</p>
    </div>

    <!-- ACTION BUTTONS -->
    <div class="action-buttons">
      <button class="btn" (click)="showChoice('analytics-reports')">üìä Analytics Reports</button>
      <button class="btn" (click)="showChoice('create-event')">‚ûï Create Event</button>
      <button class="btn" (click)="showChoice('edit-event')">‚úèÔ∏è Edit Event</button>
    </div>

    <!-- CREATE EVENT SECTION -->
    @if(activeChoice === 'create-event') {
    <div class="card">
      <div class="card-body">
        <h2 class="card-title">Create New Event</h2>

        <div class="form-row">
          <div class="form-group">
            <label for="event-title">Event Title</label>
            <input type="text" id="event-title" name="event-title" placeholder="Enter event name" />
          </div>
          <div class="form-group">
            <label for="event-location">Event Location</label>
            <input
              type="text"
              id="event-location"
              name="event-location"
              placeholder="e.g., Main Auditorium"
            />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="event-date">Event Date</label>
            <input type="date" id="event-date" name="event-date" />
          </div>
          <div class="form-group">
            <label for="event-time">Event Time</label>
            <input type="time" id="event-time" name="event-time" />
          </div>
        </div>

        <div class="form-group">
          <label for="event-description">Event Description</label>
          <textarea
            id="event-description"
            name="event-description"
            placeholder="Enter event details and description..."
          ></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="event-promo-code">Promo Code (Optional)</label>
            <input
              type="text"
              id="event-promo-code"
              name="event-promo-code"
              placeholder="e.g., SUMMER20"
            />
          </div>
          <div class="form-group">
            <label for="event-discount">Discount Value % (Optional)</label>
            <div class="discount-row">
              <input
                type="number"
                id="event-discount"
                name="event-discount"
                placeholder="0"
                min="0"
                max="100"
              />
              <span>%</span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="event-poster">Event Poster (Optional)</label>
          <input type="file" id="event-poster" name="event-poster" accept="image/*" />
        </div>

        <div class="form-actions">
          <button class="form-btn form-btn-submit" type="button" (click)="submitForm()">
            Create Event
          </button>
          <button class="form-btn form-btn-cancel" type="button" (click)="showChoice('')">
            Cancel
          </button>
        </div>
      </div>
    </div>
    }

    <!-- EDIT EVENT SECTION -->
    @else if(activeChoice === 'edit-event') {
    <div class="card">
      <div class="card-body">
        <h2 class="card-title">Edit Event</h2>

        <div class="form-group">
          <label for="select-event">Select Event to Edit</label>
          <select
            id="select-event"
            name="select-event"
            [(ngModel)]="selectedEventId"
            (change)="onEventSelect($event)"
          >
            <option [value]="null">Choose an event...</option>
            <option *ngFor="let event of userEvents" [value]="event.id">{{ event.title }}</option>
          </select>
        </div>

        @if (!selectedEventId) {
        <div class="placeholder-content">
          <div class="placeholder-icon">üìù</div>
          <p class="placeholder-text">Select an event to begin editing</p>
        </div>
        } @else {
        <div class="card-subtitle">Add Ticket Types</div>
        <div *ngFor="let category of ticketCategories; let i = index" class="category-form-row">
          <div class="form-group">
            <label>Category Name</label>
            <input
              type="text"
              [(ngModel)]="category.name"
              name="cat-name-{{i}}"
              placeholder="e.g., General Admission"
            />
          </div>
          <div class="form-group">
            <label>Short Name</label>
            <input
              type="text"
              [(ngModel)]="category.shortName"
              name="cat-short-name-{{i}}"
              placeholder="e.g., GEN"
            />
          </div>
          <div class="form-group">
            <label>Price (Rp)</label>
            <input
              type="number"
              [(ngModel)]="category.price"
              name="cat-price-{{i}}"
              placeholder="e.g., 50000"
            />
          </div>
          <button
            type="button"
            (click)="removeCategory(i)"
            class="form-group form-btn-remove"
            [disabled]="ticketCategories.length === 1"
          >
            Remove
          </button>
        </div>
        <button type="button" (click)="addCategory()" class="form-btn-add">+ Add Category</button>

        <!-- SEAT ROW CONFIGURATION -->
        <div class="card-subtitle">Seat Row Configuration</div>
        <div class="seat-config-grid">
          <div *ngFor="let config of seatConfiguration" class="form-group">
            <label>{{config.row}}</label>
            <select [(ngModel)]="config.category" name="seat-row-{{config.row}}">
              <option *ngFor="let cat of ticketCategories" [value]="cat.shortName">
                {{cat.name}} ({{cat.shortName}})
              </option>
            </select>
          </div>
        </div>
        }

        <div class="form-actions">
          <button class="form-btn form-btn-submit" type="button" (click)="submitForm()">
            Update Event
          </button>
          <button class="form-btn form-btn-cancel" type="button" (click)="showChoice('')">
            Cancel
          </button>
        </div>
      </div>
    </div>
    }

    <!-- ANALYTICS & REPORTS SECTION -->
    @else if(activeChoice === 'analytics-reports') {
    <div class="card">
      <div class="card-body">
        <h2 class="card-title">Analytics & Reports</h2>

        <div class="placeholder-content">
          <div class="placeholder-icon">üìà</div>
          <p class="placeholder-text">Analytics dashboard coming soon</p>
          <p style="font-size: 12px; color: #9ca3af; margin-top: 8px">
            Real-time event metrics, ticket sales, and user engagement data will appear here
          </p>
        </div>

        <div class="form-actions">
          <button class="form-btn form-btn-cancel" type="button" (click)="showChoice('')">
            Close
          </button>
        </div>
      </div>
    </div>
    }
  </main>
</div>
